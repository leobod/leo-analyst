import{_ as F,r as h,h as H,f as r,o as c,a as m,b as _,e as n,w as a,i as q,F as b,d as V,j as g,g as k}from"./index-3527334d.js";const E={class:"I18nCollector"},O={class:"I18nCollector-Header"},P={class:"I18nCollector-Body"},T={key:0,class:"Step Step1"},U={class:"Step-Body"},G={class:"Step1-DirContainer"},L={class:"Step-Footer"},A={__name:"I18nCollector",setup(K){const u=h({current:0,opts:[{label:"配置工程及版本信息",value:1},{label:"查看结果",value:2}]}),w=H(null),o=h({form:{dir:"",projectName:"",vueVersion:null,matchRule:["$t","i18n.global.t"]},formOpts:{vueVersion:[{label:"Vue2",value:2},{label:"Vue3",value:3}],matchRule:[{label:"$t",value:"$t"},{label:"i18n.global.t",value:"i18n.global.t"}]},formRules:{dir:[{required:!0,message:"请选择工程目录",trigger:"blur"}],projectName:[{required:!0,message:"请填写项目名称",trigger:"blur"}],vueVersion:[{required:!0,message:"请选择vue版本号",trigger:"blur"}],matchRule:[{required:!0,message:"请选择匹配规则",trigger:"blur"}]}}),C=async()=>{if(window&&window.$ipc){const e=await window.$ipc.pageAction({type:"SELECT_DIR"});if(e&&!e.errCode&&!e.data.canceled){o.form.dir=e.data.filePaths[0]||"";const l=await x(o.form.dir);l&&(o.form.projectName=l.name,o.form.vueVersion=I(l))}}else console.warn("暂不支持")},x=async e=>{if(window&&window.$ipc){const l={type:"GET_PKG_INFO",payload:{path:e}},s=await window.$ipc.pageAction(l);if(s&&!s.errCode)return s.data}else console.warn("暂不支持")},I=(e,l="vue")=>{let s=null;const p={...e.dependencies,...e.devDependencies}[l];if(p){const i=p.replace("^","").replace("~","").split("."),v=i&&i[0]||null;s=Number(v)}return s},N=()=>{w.value.validate((e,l)=>{e&&$(1)})},R=e=>{e<=u.current&&(u.current=e-1)},$=e=>{e>=0&&e<u.opts.length&&u.current++};return(e,l)=>{const s=r("el-step"),y=r("el-steps"),p=r("el-input"),f=r("el-button"),i=r("el-form-item"),v=r("el-option"),S=r("el-select"),j=r("el-checkbox"),B=r("el-checkbox-group"),D=r("el-form");return c(),m("div",E,[_("div",O,[n(y,{active:u.current,simple:"","finish-status":"success"},{default:a(()=>[(c(!0),m(b,null,V(u.opts,(t,d)=>(c(),g(s,{key:`StepItem-${d}`,title:t.label,onClick:z=>R(t.value)},null,8,["title","onClick"]))),128))]),_:1},8,["active"])]),_("div",P,[u.current===0?(c(),m("div",T,[_("div",U,[n(D,{ref_key:"step1FormRef",ref:w,model:o.form,rules:o.formRules,"label-width":"120px"},{default:a(()=>[n(i,{label:"工程目录",prop:"dir"},{default:a(()=>[_("div",G,[n(p,{modelValue:o.form.dir,"onUpdate:modelValue":l[0]||(l[0]=t=>o.form.dir=t),type:"text",clearable:""},null,8,["modelValue"]),n(f,{class:"Step1-DirBtn",onClick:C,type:"primary"},{default:a(()=>[k(" 选择工程目录 ")]),_:1})])]),_:1}),n(i,{label:"项目名称",prop:"projectName"},{default:a(()=>[n(p,{modelValue:o.form.projectName,"onUpdate:modelValue":l[1]||(l[1]=t=>o.form.projectName=t),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),n(i,{label:"Vue版本",prop:"vueVersion"},{default:a(()=>[n(S,{modelValue:o.form.vueVersion,"onUpdate:modelValue":l[2]||(l[2]=t=>o.form.vueVersion=t),clearable:"",style:{width:"100%"}},{default:a(()=>[(c(!0),m(b,null,V(o.formOpts.vueVersion,(t,d)=>(c(),g(v,{key:`vueVersion-${t.value}-${d}`,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(i,{label:"匹配的元素",prop:"matchRule"},{default:a(()=>[n(B,{modelValue:o.form.matchRule,"onUpdate:modelValue":l[3]||(l[3]=t=>o.form.matchRule=t)},{default:a(()=>[(c(!0),m(b,null,V(o.formOpts.matchRule,(t,d)=>(c(),g(j,{key:`matchRule-${t.value}-${d}`,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_("div",L,[n(f,{onClick:N,type:"primary"},{default:a(()=>[k(" 下一步 ")]),_:1})])])):q("",!0)])])}}},M=F(A,[["__scopeId","data-v-c07eff4c"]]);export{M as default};
